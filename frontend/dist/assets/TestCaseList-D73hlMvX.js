import{d as H,u as K,r,y as R,z as Q,a as E,b as k,A as W,e as l,t as u,w as o,p as X,B as Y,C as N,D as Z,v as _,F as x,g as i,G as ee,H as le,l as ae,I as S,n as te,J as oe,K as U,L as se,o as ue,M as ne,N as de,O as re,x as V,s as c,_ as ie}from"./index-BGhkaV9i.js";/* empty css                   */const me={class:"test-case-list"},pe={class:"header"},ce={class:"dialog-footer"},ve=H({__name:"TestCaseList",setup(fe){const{t:m}=K(),j=r([]),$=r([]),T=r(!1),p=r(!1),h=r(!1),a=r({id:null,project_id:null,name:"",type:"api",data:{method:"GET",url:"",headers:{},body:null}}),v=r("{}"),f=r("{}");R(()=>a.value.data.headers,()=>{});const g=async()=>{T.value=!0;try{const e=await _.get("/test-cases/");j.value=e}catch(e){console.error(e)}finally{T.value=!1}},O=async()=>{const e=await _.get("/projects/");$.value=e},J=()=>{h.value=!1,a.value={id:null,project_id:$.value.length>0?$.value[0].id:null,name:"",type:"api",data:{method:"GET",url:"",headers:{},body:null}},v.value="{}",f.value="{}",p.value=!0},I=e=>{h.value=!0,a.value=JSON.parse(JSON.stringify(e)),a.value.data||(a.value.data={}),v.value=JSON.stringify(a.value.data.headers||{},null,2),f.value=JSON.stringify(a.value.data.body||{},null,2),p.value=!0},P=async()=>{try{try{a.value.data.headers=JSON.parse(v.value)}catch{a.value.data.headers={}}try{a.value.data.body=JSON.parse(f.value)}catch{a.value.data.body=null}h.value?(await _.put(`/test-cases/${a.value.id}`,a.value),V.success(m("common.updated"))):(await _.post("/test-cases/",a.value),V.success(m("common.created"))),p.value=!1,g()}catch(e){V.error(m("common.fail")),console.error(e)}},L=async e=>{if(confirm(m("common.confirmDelete")))try{await _.delete(`/test-cases/${e}`),V.success(m("common.deleted")),g()}catch{V.error(m("common.fail"))}};return Q(()=>{g(),O()}),(e,s)=>{const b=X,y=ee,B=le,G=x,n=ne,w=oe,d=te,C=ue,D=de,q=re,A=ae,F=Z,z=Y;return c(),E("div",me,[k("div",pe,[k("h2",null,u(e.$t("testCase.title")),1),l(b,{type:"primary",onClick:J},{default:o(()=>[i(u(e.$t("testCase.createTestCase")),1)]),_:1})]),W((c(),N(G,{data:j.value,style:{width:"100%"}},{default:o(()=>[l(y,{prop:"id",label:e.$t("testCase.id"),width:"80"},null,8,["label"]),l(y,{prop:"name",label:e.$t("testCase.name")},null,8,["label"]),l(y,{prop:"type",label:e.$t("testCase.type"),width:"120"},{default:o(({row:t})=>[l(B,null,{default:o(()=>[i(u(t.type),1)]),_:2},1024)]),_:1},8,["label"]),l(y,{prop:"project_id",label:e.$t("testCase.projectId"),width:"100"},null,8,["label"]),l(y,{label:e.$t("common.actions"),width:"200"},{default:o(({row:t})=>[l(b,{size:"small",onClick:M=>I(t)},{default:o(()=>[i(u(e.$t("common.edit")),1)]),_:1},8,["onClick"]),l(b,{size:"small",type:"danger",onClick:M=>L(t.id)},{default:o(()=>[i(u(e.$t("common.delete")),1)]),_:1},8,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[z,T.value]]),l(F,{modelValue:p.value,"onUpdate:modelValue":s[9]||(s[9]=t=>p.value=t),title:h.value?e.$t("testCase.editTestCase"):e.$t("testCase.createTestCase"),width:"60%"},{footer:o(()=>[k("span",ce,[l(b,{onClick:s[8]||(s[8]=t=>p.value=!1)},{default:o(()=>[i(u(e.$t("common.cancel")),1)]),_:1}),l(b,{type:"primary",onClick:P},{default:o(()=>[i(u(e.$t("common.confirm")),1)]),_:1})])]),default:o(()=>[l(A,{model:a.value,"label-width":"100px"},{default:o(()=>[l(d,{label:e.$t("project.title"),required:""},{default:o(()=>[l(w,{modelValue:a.value.project_id,"onUpdate:modelValue":s[0]||(s[0]=t=>a.value.project_id=t),placeholder:e.$t("testCase.selectProject")},{default:o(()=>[(c(!0),E(U,null,se($.value,t=>(c(),N(n,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(d,{label:e.$t("testCase.name"),required:""},{default:o(()=>[l(C,{modelValue:a.value.name,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("testCase.type"),required:""},{default:o(()=>[l(w,{modelValue:a.value.type,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.type=t),placeholder:e.$t("testCase.selectType")},{default:o(()=>[l(n,{label:"API",value:"api"}),l(n,{label:"UI",value:"ui"}),l(n,{label:"Performance",value:"performance"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a.value.type==="api"?(c(),E(U,{key:0},[l(D,null,{default:o(()=>[i(u(e.$t("testCase.apiRequestDetails")),1)]),_:1}),l(d,{label:e.$t("testCase.method")},{default:o(()=>[l(w,{modelValue:a.value.data.method,"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.data.method=t)},{default:o(()=>[l(n,{label:"GET",value:"GET"}),l(n,{label:"POST",value:"POST"}),l(n,{label:"PUT",value:"PUT"}),l(n,{label:"DELETE",value:"DELETE"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("testCase.url")},{default:o(()=>[l(C,{modelValue:a.value.data.url,"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.data.url=t),placeholder:"http://api.example.com/v1/resource"},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("testCase.headers")},{default:o(()=>[l(C,{type:"textarea",modelValue:v.value,"onUpdate:modelValue":s[5]||(s[5]=t=>v.value=t),placeholder:'{"Content-Type": "application/json"}'},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e.$t("testCase.body")},{default:o(()=>[l(C,{type:"textarea",modelValue:f.value,"onUpdate:modelValue":s[6]||(s[6]=t=>f.value=t),rows:4,placeholder:'{"key": "value"}'},null,8,["modelValue"])]),_:1},8,["label"])],64)):S("",!0),a.value.type==="ui"?(c(),E(U,{key:1},[l(D,null,{default:o(()=>[i(u(e.$t("testCase.uiTestDetails")),1)]),_:1}),l(d,{label:e.$t("testCase.startUrl")},{default:o(()=>[l(C,{modelValue:a.value.data.url,"onUpdate:modelValue":s[7]||(s[7]=t=>a.value.data.url=t)},null,8,["modelValue"])]),_:1},8,["label"]),l(q,{title:e.$t("testCase.complexScriptAlert"),type:"info",closable:!1},null,8,["title"])],64)):S("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Ce=ie(ve,[["__scopeId","data-v-a27ac08b"]]);export{Ce as default};
