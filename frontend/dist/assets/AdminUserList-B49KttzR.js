import{d as E,u as T,r as p,z as S,a as w,b as g,A as M,e as t,t as l,w as i,p as U,B as F,C as N,v as _,x as d,F as z,g as c,G as A,H as I,P as L,s as $,_ as V}from"./index-BGhkaV9i.js";const D={class:"admin-user-list"},G={class:"header"},H=E({__name:"AdminUserList",setup(J){const{t:s}=T(),o=p([]),m=p(!1),v=p(JSON.parse(localStorage.getItem("user")||"{}")),f=async()=>{m.value=!0;try{const e=await _.get("/admin/users");o.value=e}catch{d.error(s("admin.fetchFailed"))}finally{m.value=!1}},y=async e=>{try{await _.put(`/admin/users/${e.id}/status?is_active=${!e.is_active}`),e.is_active=!e.is_active,d.success(s("admin.statusSuccess"))}catch{d.error(s("admin.statusFailed"))}},h=e=>{L.confirm(s("admin.deleteConfirmMessage",{name:e.username}),s("admin.deleteConfirmTitle"),{confirmButtonText:s("common.delete"),cancelButtonText:s("common.cancel"),type:"warning"}).then(async()=>{try{await _.delete(`/admin/users/${e.id}`),o.value=o.value.filter(r=>r.id!==e.id),d.success(s("admin.deleteSuccess"))}catch{d.error(s("admin.deleteFailed"))}})};return S(()=>{f()}),(e,r)=>{const u=U,n=A,b=I,C=z,B=F;return $(),w("div",D,[g("div",G,[g("h2",null,l(e.$t("admin.userManagement")),1),t(u,{type:"primary",onClick:f},{default:i(()=>[c(l(e.$t("admin.refresh")),1)]),_:1})]),M(($(),N(C,{data:o.value,style:{width:"100%"}},{default:i(()=>[t(n,{prop:"id",label:e.$t("admin.id"),width:"80"},null,8,["label"]),t(n,{prop:"username",label:e.$t("admin.username")},null,8,["label"]),t(n,{prop:"email",label:e.$t("admin.email")},null,8,["label"]),t(n,{prop:"is_superuser",label:e.$t("admin.role")},{default:i(({row:a})=>[t(b,{type:a.is_superuser?"danger":"info"},{default:i(()=>[c(l(a.is_superuser?e.$t("admin.admin"):e.$t("admin.user")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(n,{prop:"is_active",label:e.$t("admin.status")},{default:i(({row:a})=>[t(b,{type:a.is_active?"success":"warning"},{default:i(()=>[c(l(a.is_active?e.$t("admin.active"):e.$t("admin.inactive")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(n,{label:e.$t("common.actions"),width:"200"},{default:i(({row:a})=>[t(u,{size:"small",type:a.is_active?"warning":"success",onClick:k=>y(a),disabled:a.id===v.value.id},{default:i(()=>[c(l(a.is_active?e.$t("admin.deactivate"):e.$t("admin.activate")),1)]),_:2},1032,["type","onClick","disabled"]),t(u,{size:"small",type:"danger",onClick:k=>h(a),disabled:a.id===v.value.id},{default:i(()=>[c(l(e.$t("admin.delete")),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["label"])]),_:1},8,["data"])),[[B,m.value]])])}}}),P=V(H,[["__scopeId","data-v-1c8acb11"]]);export{P as default};
